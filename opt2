    def _load_mapping_index_gray_to_lut(self):
        if hasattr(self, "_lut_map_high") and self._lut_map_high is not None:
            return  # 이미 로드된 경우

        csv_path = os.path.join(os.path.dirname(__file__), "LUT_index_mapping.csv")
        if not os.path.exists(csv_path):
            raise FileNotFoundError(f"[Correction] LUT_index_mapping.csv not found: {csv_path}")

        df = pd.read_csv(csv_path)

        df.columns = [c.strip().lower() for c in df.columns]
        if not ("8bit gray" in df.columns and "12bit lut index" in df.columns):
            raise ValueError(f"[Correction] Unexpected columns: {df.columns}")

        gray_col = df["8bit gray"].to_numpy(dtype=np.int32)
        idx_col  = df["12bit lut index"].to_numpy(dtype=np.int32)

        # gray 순서대로 정렬 (혹시 섞여 있으면)
        sort_idx = np.argsort(gray_col)
        idx_col_sorted = idx_col[sort_idx]

        # 모든 채널에 동일 매핑 적용
        self._lut_map_high = {
            "R": idx_col_sorted,
            "G": idx_col_sorted,
            "B": idx_col_sorted,
        }

        logging.info(f"[Correction] loaded {csv_path}, shape={df.shape}, range={idx_col_sorted.min()}~{idx_col_sorted.max()}")
